include include/header-sondage
extends include/layout
block content
    div(ng-app='pages.sondage', ng-controller="SondageControleur")
        mixin headerSondage()
        .reseaux-sociaux
        a.twitter-share-button(href="http://twitter.com/share", data-count="horizontal", data-lang="fr") tweet
        | <g:plusone size="medium"></g:plusone>
        .well
            h3 Participate :
            form(ng-controller="VoteControleur", ng-submit="valideVote()")
                .form-group
                    label(for="nom") Your name or nickname
                    input.form-control(type="text", placeholder="Enter name or nickname", ng-model="vote.name")


                label Proceed with your vote !
                .row(ng-cloak)
                    .col-md-8.col-md-offset-4
                        .row.participation
                            .col-md-4
                                label
                                    span.label.label-primary 1
                                    | Pick proposals
                                ul.list-group
                                    li.list-group-item(ng-repeat="proposition in propositions")
                                        h5.list-group-item-heading.text-info
                                            strong {{proposition.label}}
                                        p.list-group-item-text
                                            button.btn.btn-info(ng-click="votePour(proposition)", type="button")
                                                | Select
                                                span.glyphicon.glyphicon-chevron-right


                            .col-md-4
                                label
                                    span.label.label-primary 2
                                    | Order them
                                ul.list-group
                                    li.list-group-item(ng-repeat="proposition in vote.proposals")
                                        h5.list-group-item-heading.text-success
                                            strong {{proposition.label}}
                                        p.list-group-item-text
                                            .btn-group
                                                button.btn.btn-info(type="button", ng-click="annuleVotePour(proposition)")
                                                    span.glyphicon.glyphicon-chevron-left
                                                    | Unselect
                                                button.btn.btn-default(type="button", ng-if="!$first", ng-click="monte(proposition)")
                                                    span.glyphicon.glyphicon-chevron-up
                                                button.btn.btn-default(type="button", ng-if="!$last", ng-click="descend(proposition)")
                                                    span.glyphicon.glyphicon-chevron-down
                .action
                    button(type="submit").btn.btn-primary.btn-lg Vote !

        div(ng-if="sondage.withComments", disqus)

block js
    != renderJs("sondage")
    script(type="text/javascript", src="//platform.twitter.com/widgets.js")
    script(type="text/javascript", src="http://apis.google.com/js/plusone.js")